# 11 udp 数据报协议
## 11.1 引言
```
UDP 伪装成一个IP 数据报的格式

IP 首部(20字节) UDP 首部(8字节) UDP 数据

应用程序必须关心数据报的长度
  note: 超过MTU 长度IP 数据报会进行数据分片
  (即使发送端部进行分片中间的路由器等网络设备也可能造成IP 数据的分片)

```
## 11.2 UDP 首部
```
2 byte scr port  2 byte dst port
2 byte udp 长度   2 byte udp cheksum
数据
note: udp 有cheksum 保证了中奖不会被篡改

TCP 和 UDP 端口是独立的


udp 长度 udp 首部 + udp 数据字节长度
  udp 最小长度为 0 8字节首部+0字节数据
```
## 11.3 数据报检验和
```
UDP 检验checksum 不正确会偷偷的把数据丢弃掉
```
## 11.5 IP 分片

IP 协议首部
```
4bits版本  4bits 首部长度  8bits 服务类型 16bits 总长度
16 btis 标识  3bits 标志  13 bits 位片偏移
8 bits 生存时间  8btis 协议  16位首部检验和
32 btis 源IP
32 btis 目的IP
选项(如果有)
数据

```

```
任何IP层接收到数据报的时候都会将数据报的大小和MTU 比较看是否进行分片(note:分片可能发生在本机也有可能发生在中间的路由器)

IP数据报分片后,到达目的地进行组装(note:这里的目的地不是到达最终目的地,而是到达下一站)

IP 数据报中存在一个16bits 标识值(唯一),当发生分片的时候会将该值复制到每一个分片中 在将标志设置未分片

```